/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 3.2.9
*/

var _0x541ba0=_0x5bfc;(function(_0x11e057,_0x3eadcb){var _0x38ab4e=_0x5bfc,_0x14c333=_0x11e057();while(!![]){try{var _0x56d8a0=-parseInt(_0x38ab4e(0x191))/0x1+-parseInt(_0x38ab4e(0x1a8))/0x2*(-parseInt(_0x38ab4e(0x142))/0x3)+-parseInt(_0x38ab4e(0x13a))/0x4+-parseInt(_0x38ab4e(0x17a))/0x5*(parseInt(_0x38ab4e(0x14b))/0x6)+-parseInt(_0x38ab4e(0x14a))/0x7+-parseInt(_0x38ab4e(0x14d))/0x8+parseInt(_0x38ab4e(0x1aa))/0x9*(parseInt(_0x38ab4e(0x187))/0xa);if(_0x56d8a0===_0x3eadcb)break;else _0x14c333['push'](_0x14c333['shift']());}catch(_0x4c8fb8){_0x14c333['push'](_0x14c333['shift']());}}}(_0x52a2,0x71c43));var _0xe5b063=(function(){var _0x3979c2=!![];return function(_0x34f15f,_0x35bd9a){var _0x46bcd5=_0x3979c2?function(){var _0x3ce9ea=_0x5bfc;if(_0x35bd9a){var _0x132b54=_0x35bd9a[_0x3ce9ea(0x1a2)](_0x34f15f,arguments);return _0x35bd9a=null,_0x132b54;}}:function(){};return _0x3979c2=![],_0x46bcd5;};}()),_0x5afd74=_0xe5b063(this,function(){var _0x5c6c15=_0x5bfc;return _0x5afd74[_0x5c6c15(0x145)]()[_0x5c6c15(0x153)]('(((.+)+)+)+$')['toString']()[_0x5c6c15(0x1ad)](_0x5afd74)[_0x5c6c15(0x153)]('(((.+)+)+)+$');});_0x5afd74();var _0x5ed9b8=(function(){var _0x4d16cd=!![];return function(_0x14f888,_0x4b3ba3){var _0x4534bb=_0x4d16cd?function(){if(_0x4b3ba3){var _0x25a58f=_0x4b3ba3['apply'](_0x14f888,arguments);return _0x4b3ba3=null,_0x25a58f;}}:function(){};return _0x4d16cd=![],_0x4534bb;};}()),_0x45febe=_0x5ed9b8(this,function(){var _0x2e2c2d=_0x5bfc,_0x345c5a=function(){var _0x42a6c2=_0x5bfc,_0xe4bdce;try{_0xe4bdce=Function(_0x42a6c2(0x13d)+_0x42a6c2(0x13c)+');')();}catch(_0x208ce3){_0xe4bdce=window;}return _0xe4bdce;},_0x17a75e=_0x345c5a(),_0xd2845a=_0x17a75e[_0x2e2c2d(0x1ab)]=_0x17a75e['console']||{},_0x56e0bc=['log','warn',_0x2e2c2d(0x166),'error',_0x2e2c2d(0x15d),'table',_0x2e2c2d(0x14e)];for(var _0x1958a0=0x0;_0x1958a0<_0x56e0bc[_0x2e2c2d(0x158)];_0x1958a0++){var _0x228fd8=_0x5ed9b8[_0x2e2c2d(0x1ad)]['prototype'][_0x2e2c2d(0x168)](_0x5ed9b8),_0x5fb83c=_0x56e0bc[_0x1958a0],_0x2d0ced=_0xd2845a[_0x5fb83c]||_0x228fd8;_0x228fd8[_0x2e2c2d(0x17f)]=_0x5ed9b8['bind'](_0x5ed9b8),_0x228fd8[_0x2e2c2d(0x145)]=_0x2d0ced[_0x2e2c2d(0x145)][_0x2e2c2d(0x168)](_0x2d0ced),_0xd2845a[_0x5fb83c]=_0x228fd8;}});function _0x5bfc(_0x46ceea,_0x23e96e){var _0x466999=_0x52a2();return _0x5bfc=function(_0x45febe,_0x5ed9b8){_0x45febe=_0x45febe-0x139;var _0x3f5e77=_0x466999[_0x45febe];return _0x3f5e77;},_0x5bfc(_0x46ceea,_0x23e96e);}_0x45febe();var BOOLEAN_PERMS=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0xa,0xb,0xd,0xe,0xf];async function apiERPupdateUsersOnline(_0x3ded8c,_0x5e2891){var _0x252fd8=_0x5bfc;if(!isOnline())return console[_0x252fd8(0x174)]('Error\x20Network.'),Promise[_0x252fd8(0x17e)](_0x252fd8(0x167));const _0x1107ed={'setAuthToken':_0x3ded8c,'setUsers':_0x5e2891};return fetch(_0x252fd8(0x176),{'method':'POST','headers':{'Content-Type':_0x252fd8(0x17c)},'body':JSON[_0x252fd8(0x199)](_0x1107ed)})[_0x252fd8(0x148)](_0x267c9c=>{var _0x35d088=_0x252fd8;if(!_0x267c9c['ok'])throw new Error(_0x35d088(0x1a1)+_0x267c9c[_0x35d088(0x197)]);return _0x267c9c[_0x35d088(0x15b)]();})[_0x252fd8(0x148)](_0x4df953=>{var _0x4b85d0=_0x252fd8;if(!_0x4df953['success'])throw new Error(_0x4df953[_0x4b85d0(0x13f)]||_0x4b85d0(0x16f));return console[_0x4b85d0(0x174)](_0x4b85d0(0x189)),_0x4df953;})[_0x252fd8(0x164)](_0x3332d3=>{var _0x20b21b=_0x252fd8;console[_0x20b21b(0x177)](_0x20b21b(0x182),_0x3332d3);throw _0x3332d3;});}async function apiERPsyncUsers(){var _0x2dce9e=_0x5bfc;isLoggedIn(company)&&(isOnline()&&await apiERPupdateUsersOnline(company[0x0][_0x2dce9e(0x141)],company[0x0][_0x2dce9e(0x16b)]));}function generatePermissionsPanel(_0x4196a9){var _0x2bd0b4=_0x5bfc,_0x9dc85d=document['getElementById'](_0x2bd0b4(0x151));_0x9dc85d[_0x2bd0b4(0x14c)]='';var _0xb4e4=_0x4196a9[0x0]&&_0x4196a9[0x0][_0x2bd0b4(0x16b)]||[],_0xacbbe1=_0x4196a9[0x0]&&_0x4196a9[0x0]['setTipoOperaciones']||[];for(var _0x13f2e5=0x0;_0x13f2e5<_0xb4e4[_0x2bd0b4(0x158)];_0x13f2e5++){var _0x3be661=_0xb4e4[_0x13f2e5],_0x457507=document['createElement'](_0x2bd0b4(0x169));_0x457507[_0x2bd0b4(0x152)]=_0x2bd0b4(0x1a3),_0x457507['id']=_0x2bd0b4(0x18b)+_0x13f2e5;var _0x1c6cb5=document[_0x2bd0b4(0x18d)]('h3');_0x1c6cb5[_0x2bd0b4(0x152)]='userPerm_header',_0x1c6cb5[_0x2bd0b4(0x192)]=_0x3be661[_0x2bd0b4(0x170)]||_0x2bd0b4(0x19e)+(_0x13f2e5+0x1),_0x457507['appendChild'](_0x1c6cb5);var _0x36a17f=document[_0x2bd0b4(0x18d)]('div');_0x36a17f[_0x2bd0b4(0x152)]=_0x2bd0b4(0x150);for(var _0x513796=0x0;_0x513796<_0x3be661['setPermissions']['length'];_0x513796++){var _0x4aa76a=_0x3be661[_0x2bd0b4(0x173)][_0x513796],_0x5dfedc=document[_0x2bd0b4(0x18d)](_0x2bd0b4(0x169));_0x5dfedc[_0x2bd0b4(0x152)]='userPerm_item',_0x5dfedc[_0x2bd0b4(0x19a)]['userIndex']=_0x13f2e5,_0x5dfedc[_0x2bd0b4(0x19a)][_0x2bd0b4(0x154)]=_0x513796;var _0x5d3bbb=Number(_0x4aa76a['setPermissionValue']),_0x51d550=document[_0x2bd0b4(0x18d)](_0x2bd0b4(0x1a6));_0x51d550['className']=_0x2bd0b4(0x146),_0x51d550[_0x2bd0b4(0x15e)]=!![];if(BOOLEAN_PERMS[_0x2bd0b4(0x1a7)](_0x4aa76a[_0x2bd0b4(0x162)])!==-0x1){var _0x2af293=document[_0x2bd0b4(0x18d)](_0x2bd0b4(0x149));_0x2af293[_0x2bd0b4(0x188)]='0',_0x2af293[_0x2bd0b4(0x192)]=_0x4aa76a[_0x2bd0b4(0x17b)],_0x51d550[_0x2bd0b4(0x18c)](_0x2af293);var _0x5a9f79=document[_0x2bd0b4(0x18d)]('option');_0x5a9f79['value']='1',_0x5a9f79['textContent']=_0x4aa76a[_0x2bd0b4(0x163)],_0x51d550[_0x2bd0b4(0x18c)](_0x5a9f79),_0x51d550[_0x2bd0b4(0x188)]=String(_0x5d3bbb);}else{if(_0x4aa76a[_0x2bd0b4(0x162)]===0x9||_0x4aa76a[_0x2bd0b4(0x162)]===0xc){if(_0x4aa76a[_0x2bd0b4(0x162)]===0x9){var _0x156bce=document[_0x2bd0b4(0x18d)](_0x2bd0b4(0x149));_0x156bce[_0x2bd0b4(0x188)]='0',_0x156bce[_0x2bd0b4(0x192)]=_0x4aa76a[_0x2bd0b4(0x17b)],_0x51d550[_0x2bd0b4(0x18c)](_0x156bce);for(var _0x114399=0x0;_0x114399<_0xacbbe1['length'];_0x114399++){var _0x12d433=_0xacbbe1[_0x114399],_0xde3493=document['createElement'](_0x2bd0b4(0x149));_0xde3493['value']=String(_0x12d433[_0x2bd0b4(0x14f)]),_0xde3493[_0x2bd0b4(0x192)]=_0x12d433[_0x2bd0b4(0x16e)],_0x51d550['appendChild'](_0xde3493);}}if(_0x4aa76a[_0x2bd0b4(0x162)]===0xc)for(var _0x114399=0x1;_0x114399<=0x4;_0x114399++){var _0x12d433=_0x114399,_0xde3493=document[_0x2bd0b4(0x18d)]('option');_0xde3493[_0x2bd0b4(0x188)]=String(_0x12d433),_0xde3493[_0x2bd0b4(0x192)]=_0x2bd0b4(0x19c)+_0x12d433,_0x51d550[_0x2bd0b4(0x18c)](_0xde3493);}_0x51d550[_0x2bd0b4(0x188)]=String(_0x5d3bbb);}}_0x5dfedc[_0x2bd0b4(0x18c)](_0x51d550),_0x36a17f[_0x2bd0b4(0x18c)](_0x5dfedc);}_0x457507[_0x2bd0b4(0x18c)](_0x36a17f);var _0x245ace=document[_0x2bd0b4(0x18d)](_0x2bd0b4(0x175));_0x245ace[_0x2bd0b4(0x152)]=_0x2bd0b4(0x143),_0x245ace['textContent']=_0x2bd0b4(0x18a),_0x245ace[_0x2bd0b4(0x19a)][_0x2bd0b4(0x16c)]=_0x13f2e5;var _0x111976=document[_0x2bd0b4(0x18d)]('button');_0x111976['className']=_0x2bd0b4(0x144),_0x111976[_0x2bd0b4(0x192)]=_0x2bd0b4(0x183),_0x111976['dataset'][_0x2bd0b4(0x16c)]=_0x13f2e5,_0x111976[_0x2bd0b4(0x180)][_0x2bd0b4(0x156)]=_0x2bd0b4(0x17d),_0x457507[_0x2bd0b4(0x18c)](_0x245ace),_0x457507[_0x2bd0b4(0x18c)](_0x111976),_0x9dc85d[_0x2bd0b4(0x18c)](_0x457507),_0x245ace[_0x2bd0b4(0x181)](_0x2bd0b4(0x19d),onEditClick),_0x111976[_0x2bd0b4(0x181)](_0x2bd0b4(0x19d),onSaveClick);}}function onEditClick(_0xf23bc4){var _0x31b716=_0x5bfc,_0x205f5b=_0xf23bc4[_0x31b716(0x1a5)][_0x31b716(0x19a)][_0x31b716(0x16c)],_0x1bc738=document[_0x31b716(0x1a0)]('userPerm_container_'+_0x205f5b),_0x3669df=_0x1bc738[_0x31b716(0x190)](_0x31b716(0x146));for(var _0x2d6c84=0x0;_0x2d6c84<_0x3669df[_0x31b716(0x158)];_0x2d6c84++){_0x3669df[_0x2d6c84]['disabled']=![];}_0x1bc738[_0x31b716(0x1a4)]('.userPerm_editBtn')[_0x31b716(0x180)][_0x31b716(0x156)]=_0x31b716(0x17d),_0x1bc738[_0x31b716(0x1a4)](_0x31b716(0x19b))['style'][_0x31b716(0x156)]='block',_0x1bc738[_0x31b716(0x152)]='userPerm_container\x20border_orange';}async function onSaveClick(_0x264449){var _0x2a996c=_0x5bfc,_0x511a54=_0x264449[_0x2a996c(0x1a5)][_0x2a996c(0x19a)]['userIndex'],_0x197859=document[_0x2a996c(0x1a0)](_0x2a996c(0x18b)+_0x511a54),_0x2df83e=_0x197859['getElementsByClassName']('userPerm_item');for(var _0x4b3826=0x0;_0x4b3826<_0x2df83e['length'];_0x4b3826++){var _0x28e6ba=_0x2df83e[_0x4b3826],_0x3f36df=parseInt(_0x28e6ba[_0x2a996c(0x19a)]['userIndex'],0xa),_0x3bebd0=parseInt(_0x28e6ba[_0x2a996c(0x19a)][_0x2a996c(0x154)],0xa),_0x2e821b=company[0x0][_0x2a996c(0x16b)][_0x3f36df]['setPermissions'][_0x3bebd0],_0x5d78e4=_0x28e6ba[_0x2a996c(0x190)]('userPerm_select')[0x0],_0x2334a6=_0x5d78e4[_0x2a996c(0x188)];_0x2e821b[_0x2a996c(0x196)]=_0x2334a6,_0x5d78e4[_0x2a996c(0x15e)]=!![],company[0x0][_0x2a996c(0x16b)][_0x3f36df][_0x2a996c(0x140)]=new Date();}const _0x165eb9=await createCartStore('');await saveCompanyToIndexedDB(company,_0x165eb9),_0x197859[_0x2a996c(0x1a4)](_0x2a996c(0x19b))[_0x2a996c(0x180)][_0x2a996c(0x156)]='none',_0x197859[_0x2a996c(0x1a4)]('.userPerm_editBtn')['style']['display']=_0x2a996c(0x139),_0x197859[_0x2a996c(0x152)]=_0x2a996c(0x1a3),apiERPsyncUsers();}function generateOfflineOperationsTable(){var _0x37a0fd=_0x5bfc,_0x231832=document[_0x37a0fd(0x1a0)](_0x37a0fd(0x193));return _0x231832[_0x37a0fd(0x14c)]='',createCartStore('')[_0x37a0fd(0x148)](function(_0x173a2a){var _0x577eb0=_0x37a0fd,_0x42cafb=_0x173a2a['transaction']('offline_operations',_0x577eb0(0x172)),_0x1ea597=_0x42cafb[_0x577eb0(0x179)](_0x577eb0(0x195));return new Promise(function(_0x302873,_0xf7ee36){var _0x298dc2=_0x577eb0,_0x3931fc=_0x1ea597[_0x298dc2(0x171)]();_0x3931fc[_0x298dc2(0x1a9)]=function(){_0x302873(_0x3931fc['result']);},_0x3931fc[_0x298dc2(0x16a)]=function(){_0xf7ee36(_0x3931fc['error']);};});})[_0x37a0fd(0x148)](function(_0x1ac7e7){var _0x4835a0=_0x37a0fd,_0x2c57a5=[];for(var _0x1bbc7a=0x0;_0x1bbc7a<_0x1ac7e7['length'];_0x1bbc7a++){_0x1ac7e7[_0x1bbc7a][_0x4835a0(0x15f)]==0x1&&_0x2c57a5[_0x4835a0(0x157)](_0x1ac7e7[_0x1bbc7a]);}if(_0x2c57a5['length']===0x0){_0x231832[_0x4835a0(0x192)]=_0x4835a0(0x186);return;}var _0x1badf7=document['createElement'](_0x4835a0(0x147));_0x1badf7[_0x4835a0(0x152)]='offlineOps_table';var _0x23295f=document[_0x4835a0(0x18d)](_0x4835a0(0x19f)),_0x1d05b8=document[_0x4835a0(0x18d)]('tr');[_0x4835a0(0x194),_0x4835a0(0x1ae),_0x4835a0(0x15a),_0x4835a0(0x13e),_0x4835a0(0x161)][_0x4835a0(0x159)](function(_0x37a7c4){var _0x4dd297=_0x4835a0,_0x2c0aae=document[_0x4dd297(0x18d)]('th');_0x2c0aae[_0x4dd297(0x192)]=_0x37a7c4,_0x1d05b8[_0x4dd297(0x18c)](_0x2c0aae);}),_0x23295f[_0x4835a0(0x18c)](_0x1d05b8),_0x1badf7[_0x4835a0(0x18c)](_0x23295f);var _0x1ec688=document[_0x4835a0(0x18d)](_0x4835a0(0x184));_0x2c57a5[_0x4835a0(0x159)](function(_0x37fce1){var _0x493c4c=_0x4835a0,_0x180824=document[_0x493c4c(0x18d)]('tr'),_0x422311=[_0x37fce1[_0x493c4c(0x185)],_0x37fce1[_0x493c4c(0x1ac)],_0x37fce1['setCorrelativo'],_0x37fce1[_0x493c4c(0x165)],_0x37fce1['setMessage']||''];_0x422311['forEach'](function(_0x1f5ffe){var _0x2046bd=_0x493c4c,_0x124671=document['createElement']('td');_0x124671[_0x2046bd(0x192)]=_0x1f5ffe,_0x180824[_0x2046bd(0x18c)](_0x124671);}),_0x1ec688[_0x493c4c(0x18c)](_0x180824);}),_0x1badf7[_0x4835a0(0x18c)](_0x1ec688),_0x231832[_0x4835a0(0x18c)](_0x1badf7);})[_0x37a0fd(0x164)](function(_0x49cb13){var _0x3cc309=_0x37a0fd;console['error'](_0x3cc309(0x178),_0x49cb13),_0x231832[_0x3cc309(0x192)]='Error\x20cargando\x20operaciones.';});}window[_0x541ba0(0x13b)]=function(){var _0x15c8c1=_0x541ba0;const _0x22f6ab=0x2;loadLoginContent(_0x15c8c1(0x155)),setUserNameGet(),setEventBtnAccess();const _0x5d9ab8=document[_0x15c8c1(0x1a4)](_0x15c8c1(0x18f));_0x5d9ab8&&_0x5d9ab8['addEventListener'](_0x15c8c1(0x19d),function(){logoutReload(0x0,_0x22f6ab);}),document['getElementById'](_0x15c8c1(0x198))[_0x15c8c1(0x181)]('change',async function(){const _0x359914=parseInt(this['value']);company[0x0]['setBranchDefault']=_0x359914;const _0x19e893=await createCartStore('');await saveCompanyToIndexedDB(company,_0x19e893),cargarAlmacenes(_0x359914),setTimeout(()=>{var _0x726a0d=_0x5bfc;document[_0x726a0d(0x1a0)](_0x726a0d(0x16d))[_0x726a0d(0x18e)](new Event(_0x726a0d(0x15c)));},0x64),cargarPisos(_0x359914),setTimeout(()=>{var _0x12f026=_0x5bfc;document[_0x12f026(0x1a0)](_0x12f026(0x160))[_0x12f026(0x18e)](new Event(_0x12f026(0x15c)));},0x64),ntf_initNotifications();}),loadCartAndSetTabCount(_0x22f6ab);};function _0x52a2(){var _0x4e8bc8=['setTipoOperacionName','Error\x20desconocido\x20al\x20actualizar\x20Data.','setUserFullName','getAll','readonly','setPermissions','log','button','https://apierp.dev/api/users/update/','error','Error\x20leyendo\x20operaciones:','objectStore','4222525GShTLj','setPermissionNameFalse','application/json','none','reject','__proto__','style','addEventListener','Error\x20al\x20actualizar\x20data\x20online:','Guardar','tbody','setTipoOperacion','No\x20hay\x20operaciones\x20pendientes.','88370SXtNbi','value','Data\x20actualizada\x20correctamente\x20en\x20la\x20base\x20de\x20datos.','Editar','userPerm_container_','appendChild','createElement','dispatchEvent','.btn-logout','getElementsByClassName','31380HYagDY','textContent','panel_operations','Tipo','offline_operations','setPermissionValue','statusText','setBranchId','stringify','dataset','.userPerm_saveBtn','NÃºmero\x20de\x20Decimales:\x20','click','Usuario\x20','thead','getElementById','Error\x20Sync:\x20','apply','userPerm_container\x20border_blue','querySelector','target','select','indexOf','1196198ompoEX','onsuccess','2448NKbhUK','console','setSerie','constructor','Serie','inline-block','1412368CpBOFO','onload','{}.constructor(\x22return\x20this\x22)(\x20)','return\x20(function()\x20','Fecha','message','setLastDateUpdate','setAuthToken','3IoqxIe','userPerm_editBtn','userPerm_saveBtn','toString','userPerm_select','table','then','option','3841166uuzRQR','6YTHKPL','innerHTML','6064488UOHpKN','trace','setTipoOperacionCodigo','userPerm_list','panel_users','className','search','permIndex','./img/apiPOS.png','display','push','length','forEach','Correlativo','json','change','exception','disabled','apiPOSsendOffline','setFloorId','Motivo','setPermissionId','setPermissionNameTrue','catch','setFechaHora','info','Error\x20Network.','bind','div','onerror','setUsers','userIndex','setWarehouseId'];_0x52a2=function(){return _0x4e8bc8;};return _0x52a2();}
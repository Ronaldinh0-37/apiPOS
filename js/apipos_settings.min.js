/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.3.9
*/

var _0x32b0c0=_0x12e2;(function(_0x7c986,_0x5c7146){var _0x498b59=_0x12e2,_0x3e4754=_0x7c986();while(!![]){try{var _0x49b0c1=parseInt(_0x498b59(0x14d))/0x1+-parseInt(_0x498b59(0x15f))/0x2*(parseInt(_0x498b59(0x12a))/0x3)+parseInt(_0x498b59(0x13d))/0x4+-parseInt(_0x498b59(0xf0))/0x5+-parseInt(_0x498b59(0x12f))/0x6+parseInt(_0x498b59(0x108))/0x7+parseInt(_0x498b59(0x13b))/0x8;if(_0x49b0c1===_0x5c7146)break;else _0x3e4754['push'](_0x3e4754['shift']());}catch(_0x32a400){_0x3e4754['push'](_0x3e4754['shift']());}}}(_0x4145,0xd4628));var _0x1ec972=(function(){var _0x1c7118=!![];return function(_0x369b39,_0x2a862d){var _0x125b03=_0x1c7118?function(){var _0x590e47=_0x12e2;if(_0x2a862d){var _0x338a7c=_0x2a862d[_0x590e47(0x130)](_0x369b39,arguments);return _0x2a862d=null,_0x338a7c;}}:function(){};return _0x1c7118=![],_0x125b03;};}()),_0x26d31a=_0x1ec972(this,function(){var _0x266ae3=_0x12e2;return _0x26d31a[_0x266ae3(0x10c)]()[_0x266ae3(0x136)](_0x266ae3(0x148))[_0x266ae3(0x10c)]()['constructor'](_0x26d31a)[_0x266ae3(0x136)](_0x266ae3(0x148));});_0x26d31a();var _0x50261c=(function(){var _0x12d085=!![];return function(_0x2b38fc,_0x5e3b9a){var _0x1b86b4=_0x12d085?function(){var _0x234f10=_0x12e2;if(_0x5e3b9a){var _0x1fe98d=_0x5e3b9a[_0x234f10(0x130)](_0x2b38fc,arguments);return _0x5e3b9a=null,_0x1fe98d;}}:function(){};return _0x12d085=![],_0x1b86b4;};}()),_0x37622e=_0x50261c(this,function(){var _0x52819c=_0x12e2,_0x33e503;try{var _0x55fc11=Function(_0x52819c(0x14b)+_0x52819c(0x15a)+');');_0x33e503=_0x55fc11();}catch(_0x5a80b5){_0x33e503=window;}var _0x3ea14d=_0x33e503[_0x52819c(0x113)]=_0x33e503[_0x52819c(0x113)]||{},_0x18b9fb=[_0x52819c(0xf7),'warn','info',_0x52819c(0x15b),_0x52819c(0x121),_0x52819c(0x140),_0x52819c(0xfb)];for(var _0x26f7da=0x0;_0x26f7da<_0x18b9fb[_0x52819c(0x119)];_0x26f7da++){var _0x427bc2=_0x50261c[_0x52819c(0x133)][_0x52819c(0xef)][_0x52819c(0xfa)](_0x50261c),_0x40a52e=_0x18b9fb[_0x26f7da],_0x5484ef=_0x3ea14d[_0x40a52e]||_0x427bc2;_0x427bc2[_0x52819c(0xf3)]=_0x50261c[_0x52819c(0xfa)](_0x50261c),_0x427bc2[_0x52819c(0x10c)]=_0x5484ef[_0x52819c(0x10c)][_0x52819c(0xfa)](_0x5484ef),_0x3ea14d[_0x40a52e]=_0x427bc2;}});_0x37622e();var BOOLEAN_PERMS=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0xa,0xb,0xd,0xe,0xf,0x10,0x11,0x13,0x14,0x15,0x16,0x17,0x18];async function apiERPupdateUsersOnline(_0x430ece,_0x2b61a6){var _0x3f7ad5=_0x12e2;if(!isOnline())return console[_0x3f7ad5(0xf7)](_0x3f7ad5(0x107)),Promise[_0x3f7ad5(0x10e)]('Error\x20Network.');const _0x2c5b61={'setAuthToken':_0x430ece,'setUsers':_0x2b61a6};return fetch(_0x3f7ad5(0x162),{'method':_0x3f7ad5(0x105),'headers':{'Content-Type':_0x3f7ad5(0x146)},'body':JSON[_0x3f7ad5(0x151)](_0x2c5b61)})[_0x3f7ad5(0x103)](_0x1de2e7=>{var _0x4dd041=_0x3f7ad5;if(!_0x1de2e7['ok'])throw new Error('Error\x20Sync:\x20'+_0x1de2e7['statusText']);return _0x1de2e7[_0x4dd041(0x13f)]();})[_0x3f7ad5(0x103)](_0x160441=>{var _0x558118=_0x3f7ad5;if(!_0x160441[_0x558118(0xee)])throw new Error(_0x160441[_0x558118(0x15e)]||_0x558118(0xff));return console[_0x558118(0xf7)](_0x558118(0x137)),_0x160441;})[_0x3f7ad5(0x116)](_0x204831=>{var _0x5edeaa=_0x3f7ad5;console[_0x5edeaa(0x15b)](_0x5edeaa(0xfc),_0x204831);throw _0x204831;});}async function apiERPsyncUsers(){var _0x91b20a=_0x12e2;isLoggedIn(company)&&(isOnline()&&await apiERPupdateUsersOnline(company[0x0]['setAuthToken'],company[0x0][_0x91b20a(0xfe)]));}function generatePermissionsPanel(_0x3bb314){var _0x1170f1=_0x12e2,_0x49bb23=document['getElementById'](_0x1170f1(0x100));_0x49bb23[_0x1170f1(0x142)]='';var _0x3542fd=_0x3bb314[0x0]&&_0x3bb314[0x0][_0x1170f1(0xfe)]||[],_0x28a281=_0x3bb314[0x0]&&_0x3bb314[0x0][_0x1170f1(0x114)]||[];for(var _0x4f64ce=0x0;_0x4f64ce<_0x3542fd[_0x1170f1(0x119)];_0x4f64ce++){var _0x323bde=_0x3542fd[_0x4f64ce],_0x52d168=document['createElement'](_0x1170f1(0x10f));_0x52d168['className']=_0x1170f1(0x138),_0x52d168['id']='userPerm_container_'+_0x4f64ce;var _0xfb9ebe=document['createElement']('h3');_0xfb9ebe[_0x1170f1(0xeb)]=_0x1170f1(0x14f),_0xfb9ebe[_0x1170f1(0x156)]=_0x323bde[_0x1170f1(0x118)]||_0x1170f1(0x102)+(_0x4f64ce+0x1),_0x52d168[_0x1170f1(0xf1)](_0xfb9ebe);var _0x5f579b=document[_0x1170f1(0x14a)](_0x1170f1(0x10f));_0x5f579b[_0x1170f1(0xeb)]='userPerm_list';for(var _0x456022=0x0;_0x456022<_0x323bde[_0x1170f1(0x12e)]['length'];_0x456022++){var _0x446852=_0x323bde[_0x1170f1(0x12e)][_0x456022],_0x1fc21f=document[_0x1170f1(0x14a)]('div');_0x1fc21f[_0x1170f1(0xeb)]=_0x1170f1(0x131),_0x1fc21f['dataset']['userIndex']=_0x4f64ce,_0x1fc21f[_0x1170f1(0x123)][_0x1170f1(0x163)]=_0x456022;var _0x1f908a=Number(_0x446852['setPermissionValue']),_0x1df41a=document[_0x1170f1(0x14a)](_0x1170f1(0x127));_0x1df41a['className']=_0x1170f1(0x161),_0x1df41a[_0x1170f1(0x144)]=!![];if(BOOLEAN_PERMS['indexOf'](_0x446852[_0x1170f1(0xe7)])!==-0x1){var _0x2f404a=document[_0x1170f1(0x14a)](_0x1170f1(0xf6));_0x2f404a[_0x1170f1(0x12c)]='0',_0x2f404a[_0x1170f1(0x156)]=_0x446852[_0x1170f1(0x110)],_0x1df41a[_0x1170f1(0xf1)](_0x2f404a);var _0x24d3b9=document[_0x1170f1(0x14a)](_0x1170f1(0xf6));_0x24d3b9[_0x1170f1(0x12c)]='1',_0x24d3b9[_0x1170f1(0x156)]=_0x446852[_0x1170f1(0xf4)],_0x1df41a[_0x1170f1(0xf1)](_0x24d3b9),_0x1df41a[_0x1170f1(0x12c)]=String(_0x1f908a);}else{if(_0x446852[_0x1170f1(0xe7)]===0x9||_0x446852[_0x1170f1(0xe7)]===0xc||_0x446852[_0x1170f1(0xe7)]===0x12){if(_0x446852[_0x1170f1(0xe7)]===0x9){var _0x5e86c3=document['createElement'](_0x1170f1(0xf6));_0x5e86c3['value']='0',_0x5e86c3[_0x1170f1(0x156)]=_0x446852[_0x1170f1(0x110)],_0x1df41a[_0x1170f1(0xf1)](_0x5e86c3);for(var _0x5bb79e=0x0;_0x5bb79e<_0x28a281[_0x1170f1(0x119)];_0x5bb79e++){var _0x2d34e1=_0x28a281[_0x5bb79e],_0x2f4003=document[_0x1170f1(0x14a)](_0x1170f1(0xf6));_0x2f4003['value']=String(_0x2d34e1['setTipoOperacionCodigo']),_0x2f4003[_0x1170f1(0x156)]=_0x2d34e1[_0x1170f1(0x14c)],_0x1df41a[_0x1170f1(0xf1)](_0x2f4003);}}if(_0x446852[_0x1170f1(0xe7)]===0xc)for(var _0x5bb79e=0x1;_0x5bb79e<=0x4;_0x5bb79e++){var _0x2d34e1=_0x5bb79e,_0x2f4003=document[_0x1170f1(0x14a)](_0x1170f1(0xf6));_0x2f4003[_0x1170f1(0x12c)]=String(_0x2d34e1),_0x2f4003['textContent']='Número\x20de\x20Decimales:\x20'+_0x2d34e1,_0x1df41a['appendChild'](_0x2f4003);}if(_0x446852[_0x1170f1(0xe7)]===0x12){var _0x31a28b=myCompany&&myCompany[_0x1170f1(0x14e)]||[],_0x5e86c3=document[_0x1170f1(0x14a)]('option');_0x5e86c3[_0x1170f1(0x12c)]='0',_0x5e86c3[_0x1170f1(0x156)]=_0x446852[_0x1170f1(0x110)],_0x1df41a[_0x1170f1(0xf1)](_0x5e86c3);for(var _0x5bb79e=0x0;_0x5bb79e<_0x31a28b[_0x1170f1(0x119)];_0x5bb79e++){var _0x2d34e1=_0x31a28b[_0x5bb79e],_0x2f4003=document[_0x1170f1(0x14a)](_0x1170f1(0xf6));_0x2f4003[_0x1170f1(0x12c)]=String(_0x2d34e1[_0x1170f1(0x126)]),_0x2f4003[_0x1170f1(0x156)]=_0x2d34e1[_0x1170f1(0xe6)],_0x1df41a['appendChild'](_0x2f4003);}}_0x1df41a[_0x1170f1(0x12c)]=String(_0x1f908a);}}_0x1fc21f[_0x1170f1(0xf1)](_0x1df41a),_0x5f579b[_0x1170f1(0xf1)](_0x1fc21f);}_0x52d168['appendChild'](_0x5f579b);var _0x40506a=document[_0x1170f1(0x14a)](_0x1170f1(0x10b));_0x40506a[_0x1170f1(0xeb)]=_0x1170f1(0x124),_0x40506a[_0x1170f1(0x156)]=_0x1170f1(0x112),_0x40506a[_0x1170f1(0x123)][_0x1170f1(0xed)]=_0x4f64ce;var _0x2c2f10=document[_0x1170f1(0x14a)](_0x1170f1(0x10b));_0x2c2f10['className']=_0x1170f1(0x115),_0x2c2f10[_0x1170f1(0x156)]=_0x1170f1(0x149),_0x2c2f10[_0x1170f1(0x123)][_0x1170f1(0xed)]=_0x4f64ce,_0x2c2f10[_0x1170f1(0x13e)][_0x1170f1(0x11f)]=_0x1170f1(0x155),_0x52d168[_0x1170f1(0xf1)](_0x40506a),_0x52d168[_0x1170f1(0xf1)](_0x2c2f10),_0x49bb23[_0x1170f1(0xf1)](_0x52d168),_0x40506a[_0x1170f1(0x12b)]('click',onEditClick),_0x2c2f10[_0x1170f1(0x12b)](_0x1170f1(0x157),onSaveClick);}}function _0x12e2(_0x5a950c,_0xe3cb19){var _0x1e5429=_0x4145();return _0x12e2=function(_0x37622e,_0x50261c){_0x37622e=_0x37622e-0xe6;var _0x1b0992=_0x1e5429[_0x37622e];return _0x1b0992;},_0x12e2(_0x5a950c,_0xe3cb19);}function onEditClick(_0xb2dc37){var _0x2b6267=_0x12e2,_0x631291=_0xb2dc37[_0x2b6267(0x153)][_0x2b6267(0x123)][_0x2b6267(0xed)],_0xec0138=document['getElementById']('userPerm_container_'+_0x631291),_0x288c36=_0xec0138['getElementsByClassName'](_0x2b6267(0x161));for(var _0x5bf41d=0x0;_0x5bf41d<_0x288c36[_0x2b6267(0x119)];_0x5bf41d++){_0x288c36[_0x5bf41d][_0x2b6267(0x144)]=![];}_0xec0138[_0x2b6267(0x129)](_0x2b6267(0x132))['style'][_0x2b6267(0x11f)]=_0x2b6267(0x155),_0xec0138[_0x2b6267(0x129)]('.userPerm_saveBtn')['style']['display']=_0x2b6267(0xfd),_0xec0138[_0x2b6267(0xeb)]=_0x2b6267(0x150);}async function onSaveClick(_0x1f2e0e){var _0xfe9cff=_0x12e2,_0x47d961=_0x1f2e0e[_0xfe9cff(0x153)][_0xfe9cff(0x123)][_0xfe9cff(0xed)],_0x4ccee3=document[_0xfe9cff(0x117)](_0xfe9cff(0x122)+_0x47d961),_0x51aca8=_0x4ccee3[_0xfe9cff(0x139)](_0xfe9cff(0x131));for(var _0x3ea8d4=0x0;_0x3ea8d4<_0x51aca8['length'];_0x3ea8d4++){var _0x4328d3=_0x51aca8[_0x3ea8d4],_0x15f039=parseInt(_0x4328d3[_0xfe9cff(0x123)][_0xfe9cff(0xed)],0xa),_0x43fb03=parseInt(_0x4328d3[_0xfe9cff(0x123)][_0xfe9cff(0x163)],0xa),_0x59d27c=company[0x0][_0xfe9cff(0xfe)][_0x15f039][_0xfe9cff(0x12e)][_0x43fb03],_0x34d782=_0x4328d3['getElementsByClassName'](_0xfe9cff(0x161))[0x0],_0x9c1da3=_0x34d782[_0xfe9cff(0x12c)];_0x59d27c['setPermissionValue']=_0x9c1da3,_0x34d782['disabled']=!![],company[0x0]['setUsers'][_0x15f039][_0xfe9cff(0xea)]=new Date();}const _0x4ec487=await createCartStore('');await saveCompanyToIndexedDB(company,_0x4ec487),_0x4ccee3[_0xfe9cff(0x129)]('.userPerm_saveBtn')[_0xfe9cff(0x13e)][_0xfe9cff(0x11f)]='none',_0x4ccee3[_0xfe9cff(0x129)]('.userPerm_editBtn')[_0xfe9cff(0x13e)][_0xfe9cff(0x11f)]='inline-block',_0x4ccee3['className']=_0xfe9cff(0x138),apiERPsyncUsers();}async function deleteOfflineOperation(_0x2b14e6){var _0x485704=_0x12e2;try{var _0xa3917a=await createCartStore(''),_0x4eb8b1=_0xa3917a[_0x485704(0x15d)](_0x485704(0x10d),_0x485704(0x158)),_0x4f23d6=_0x4eb8b1[_0x485704(0x12d)](_0x485704(0x10d));_0x4f23d6[_0x485704(0x145)](_0x2b14e6),await _0x4eb8b1['complete'],await generateOfflineOperationsTable();}catch(_0x434130){console[_0x485704(0x15b)](_0x485704(0x111),_0x434130);}}async function generateOfflineOperationsTable(){var _0x469032=_0x12e2,_0x29d3c1=document[_0x469032(0x117)](_0x469032(0x147));_0x29d3c1['innerHTML']='';try{var _0x205eed=await createCartStore(''),_0x52e573=_0x205eed['transaction'](_0x469032(0x10d),_0x469032(0xe8)),_0x25003b=_0x52e573['objectStore'](_0x469032(0x10d)),_0xf34e5a=await new Promise(function(_0x5cec56,_0xc3fe18){var _0x2dd5bc=_0x469032,_0x7fc639=_0x25003b[_0x2dd5bc(0x160)]();_0x7fc639[_0x2dd5bc(0x134)]=function(){var _0x323aaa=_0x2dd5bc;_0x5cec56(_0x7fc639[_0x323aaa(0x11b)]);},_0x7fc639[_0x2dd5bc(0xf9)]=function(){var _0x628d99=_0x2dd5bc;_0xc3fe18(_0x7fc639[_0x628d99(0x15b)]);};}),_0x560ab7=[];for(var _0x57ac72=0x0;_0x57ac72<_0xf34e5a[_0x469032(0x119)];_0x57ac72++){_0xf34e5a[_0x57ac72][_0x469032(0x11e)]==0x1&&_0x560ab7[_0x469032(0x11d)](_0xf34e5a[_0x57ac72]);}if(_0x560ab7[_0x469032(0x119)]===0x0){_0x29d3c1[_0x469032(0x156)]='No\x20hay\x20operaciones\x20pendientes.';return;}var _0x864137=document[_0x469032(0x14a)](_0x469032(0x140));_0x864137[_0x469032(0xeb)]='offlineOps_table';var _0x1c040a=document[_0x469032(0x14a)]('thead'),_0x4a8075=document[_0x469032(0x14a)]('tr');[_0x469032(0xf5),_0x469032(0x143),_0x469032(0x13a),_0x469032(0xe9),_0x469032(0x128),_0x469032(0x135)][_0x469032(0x141)](function(_0x3e7f2c){var _0x343de9=_0x469032,_0x309bdb=document[_0x343de9(0x14a)]('th');_0x309bdb['textContent']=_0x3e7f2c,_0x4a8075[_0x343de9(0xf1)](_0x309bdb);}),_0x1c040a[_0x469032(0xf1)](_0x4a8075),_0x864137['appendChild'](_0x1c040a);var _0x83e64a=document['createElement'](_0x469032(0x120));_0x560ab7[_0x469032(0x141)](function(_0x502938){var _0x47ea25=_0x469032,_0x4baa1f=document[_0x47ea25(0x14a)]('tr'),_0x11b105=[_0x502938['setTipoOperacion'],_0x502938[_0x47ea25(0x154)],_0x502938[_0x47ea25(0x15c)],_0x502938[_0x47ea25(0x159)],_0x502938[_0x47ea25(0xf8)]||''];_0x11b105['forEach'](function(_0x202b69){var _0x1e7f74=_0x47ea25,_0xcf13fa=document[_0x1e7f74(0x14a)]('td');_0xcf13fa[_0x1e7f74(0x156)]=_0x202b69,_0x4baa1f[_0x1e7f74(0xf1)](_0xcf13fa);});var _0x23215a=document[_0x47ea25(0x14a)]('td'),_0x53162f=document[_0x47ea25(0x14a)](_0x47ea25(0x10b));_0x53162f[_0x47ea25(0x156)]=_0x47ea25(0x125),_0x53162f['addEventListener'](_0x47ea25(0x157),function(){confirm('¿Estás\x20seguro\x20de\x20que\x20deseas\x20eliminar\x20esta\x20operación?')&&deleteOfflineOperation(_0x502938['id']);}),_0x23215a[_0x47ea25(0xf1)](_0x53162f),_0x4baa1f[_0x47ea25(0xf1)](_0x23215a),_0x83e64a[_0x47ea25(0xf1)](_0x4baa1f);}),_0x864137[_0x469032(0xf1)](_0x83e64a),_0x29d3c1[_0x469032(0xf1)](_0x864137);}catch(_0x36d471){console[_0x469032(0x15b)]('Error\x20leyendo\x20operaciones:',_0x36d471),_0x29d3c1['textContent']='Error\x20cargando\x20operaciones.';}}window[_0x32b0c0(0x104)]=function(){var _0x3c801b=_0x32b0c0;const _0x54ab4e=0x2;loadLoginContent(_0x3c801b(0x10a)),setUserNameGet(),setEventBtnAccess();const _0x79fee4=document[_0x3c801b(0x129)](_0x3c801b(0x11c));_0x79fee4&&_0x79fee4['addEventListener']('click',function(){logoutReload(0x0,_0x54ab4e);}),document['getElementById'](_0x3c801b(0x11a))['addEventListener'](_0x3c801b(0x152),async function(){var _0x108ee5=_0x3c801b;const _0x59d04d=parseInt(this[_0x108ee5(0x12c)]);company[0x0][_0x108ee5(0x106)]=_0x59d04d;const _0x34f34e=await createCartStore('');await saveCompanyToIndexedDB(company,_0x34f34e),await cargarPisos(_0x59d04d),await waitForEvent('setFloorId',_0x108ee5(0x13c)),await cargarAlmacenes(_0x59d04d),await waitForEvent(_0x108ee5(0xf2),_0x108ee5(0x101)),document['dispatchEvent'](new Event('BranchChangeComplete')),ntf_initNotifications();}),document[_0x3c801b(0x117)](_0x3c801b(0xf2))[_0x3c801b(0x12b)]('change',async function(){var _0x31ac00=_0x3c801b;document[_0x31ac00(0xec)](new Event(_0x31ac00(0x101)));}),document[_0x3c801b(0x117)](_0x3c801b(0x109))['addEventListener'](_0x3c801b(0x152),async function(_0x2ee89e){var _0x96544d=_0x3c801b;document[_0x96544d(0xec)](new Event(_0x96544d(0x13c)));}),loadCartAndSetTabCount(_0x54ab4e);};function _0x4145(){var _0x4fc6aa=['setCorrelativo','transaction','message','574qoFMCj','getAll','userPerm_select','https://apierp.dev/api/users/update/','permIndex','setEmailCredentialsSenderEmail','setPermissionId','readonly','Fecha','setLastDateUpdate','className','dispatchEvent','userIndex','success','prototype','6723460nPhnvi','appendChild','setWarehouseId','__proto__','setPermissionNameTrue','Tipo','option','log','setMessage','onerror','bind','trace','Error\x20al\x20actualizar\x20data\x20online:','block','setUsers','Error\x20desconocido\x20al\x20actualizar\x20Data.','panel_users','WarehouseChangeComplete','Usuario\x20','then','onload','POST','setBranchDefault','Error\x20Network.','11109350FRInCj','setFloorId','./img/apiPOS.png','button','toString','offline_operations','reject','div','setPermissionNameFalse','Error\x20eliminando\x20operación:','Editar','console','setTipoOperaciones','userPerm_saveBtn','catch','getElementById','setUserFullName','length','setBranchId','result','.btn-logout','push','apiPOSsendOffline','display','tbody','exception','userPerm_container_','dataset','userPerm_editBtn','Eliminar','setEmailCredentialsId','select','Motivo','querySelector','3903hPcmQa','addEventListener','value','objectStore','setPermissions','8704044QTNrHF','apply','userPerm_item','.userPerm_editBtn','constructor','onsuccess','Acciones','search','Data\x20actualizada\x20correctamente\x20en\x20la\x20base\x20de\x20datos.','userPerm_container\x20border_blue','getElementsByClassName','Correlativo','7637560zPNubt','EnvironmentChangeComplete','3070512ZiJmwU','style','json','table','forEach','innerHTML','Serie','disabled','delete','application/json','panel_operations','(((.+)+)+)+$','Guardar','createElement','return\x20(function()\x20','setTipoOperacionName','729308ICNqgA','setEmailCredentials','userPerm_header','userPerm_container\x20border_orange','stringify','change','target','setSerie','none','textContent','click','readwrite','setFechaHora','{}.constructor(\x22return\x20this\x22)(\x20)','error'];_0x4145=function(){return _0x4fc6aa;};return _0x4145();}
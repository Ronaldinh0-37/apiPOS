/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.4.0
*/

const _0x3147fb=_0x4d84;(function(_0x3b1277,_0x5e5f4e){const _0x45c5df=_0x4d84,_0x528f04=_0x3b1277();while(!![]){try{const _0x16c87e=-parseInt(_0x45c5df(0x1e5))/0x1+-parseInt(_0x45c5df(0x1e0))/0x2+-parseInt(_0x45c5df(0x1da))/0x3*(parseInt(_0x45c5df(0x1d8))/0x4)+-parseInt(_0x45c5df(0x1fd))/0x5+-parseInt(_0x45c5df(0x20a))/0x6*(-parseInt(_0x45c5df(0x1ee))/0x7)+parseInt(_0x45c5df(0x1ef))/0x8+-parseInt(_0x45c5df(0x1fb))/0x9*(-parseInt(_0x45c5df(0x1f6))/0xa);if(_0x16c87e===_0x5e5f4e)break;else _0x528f04['push'](_0x528f04['shift']());}catch(_0x461c6e){_0x528f04['push'](_0x528f04['shift']());}}}(_0x2aaf,0x34671));const selectCredentialsApiWAChat=document['getElementById'](_0x3147fb(0x1d0)),loginPanel=document[_0x3147fb(0x1cc)](_0x3147fb(0x1ec)),chatPanel=document[_0x3147fb(0x1cc)](_0x3147fb(0x1d4)),qrImg=document[_0x3147fb(0x1cc)](_0x3147fb(0x1f9)),overlay=document[_0x3147fb(0x1cc)]('qr-overlay');let qrTimeout;const validSeconds=0xa;function showLogin(){const _0x5c422c=_0x3147fb;loginPanel[_0x5c422c(0x1e7)][_0x5c422c(0x206)]=_0x5c422c(0x1d7),chatPanel[_0x5c422c(0x1e7)][_0x5c422c(0x1f3)]=_0x5c422c(0x1c7);}function _0x4d84(_0x1372db,_0x54582a){const _0x4e1a49=_0x2aaf();return _0x4d84=function(_0x37ee9b,_0x1fc36e){_0x37ee9b=_0x37ee9b-0x1c5;let _0xc8281b=_0x4e1a49[_0x37ee9b];return _0xc8281b;},_0x4d84(_0x1372db,_0x54582a);}function showChat(){const _0x2af370=_0x3147fb;loginPanel[_0x2af370(0x1e7)][_0x2af370(0x206)]=_0x2af370(0x1d5),chatPanel['style'][_0x2af370(0x1f3)]=_0x2af370(0x1c5);}function _0x2aaf(){const _0x4ba682=['return\x20(function()\x20','3joZTby','table','bind','{}.constructor(\x22return\x20this\x22)(\x20)','log','apply','467696zdYPXV','__proto__','dispatchEvent','warn','constructor','323641NfQFpp','click','style','includes','Credenciales\x20no\x20encontradas','setBranchDefault','console','loginPanel','prototype','133iboXLM','2215640EckLLX','value','length','BranchChangeComplete','visibility','EnvironmentChangeComplete','/qr','6557820unDOwZ','status','.btn-logout','qr-img','(((.+)+)+)+$','9hLhrrC','src','564495bEsbqN','setCredentialsApiWAChatStatus','init','error','onload','toLowerCase','setCredentialsApiWAChatSubdomain','change','setWarehouseId','display','setCredentialsApiWAChatPort','WarehouseChangeComplete','info','109218vFVNYS','trace','visible','./img/apiPOS.png','hidden','ya\x20conectado','search','/wa/','json','getElementById','Error\x20al\x20validar\x20estado\x20despu√©s\x20de\x20expirar\x20QR:','https://','setFloorId','setCredentialsApiWAChat','querySelector','toString','addEventListener','chatPanel','none','exception','flex','1574260pQhvYt'];_0x2aaf=function(){return _0x4ba682;};return _0x2aaf();}async function initQRApiWAChat(_0x16f578,_0x36d551){const _0x38584d=_0x3147fb,_0xbb0769=(function(){let _0x2ebc97=!![];return function(_0x2aa198,_0x17447a){const _0x3e40d6=_0x2ebc97?function(){const _0x4fb43a=_0x4d84;if(_0x17447a){const _0x247711=_0x17447a[_0x4fb43a(0x1df)](_0x2aa198,arguments);return _0x17447a=null,_0x247711;}}:function(){};return _0x2ebc97=![],_0x3e40d6;};}()),_0x4f9584=_0xbb0769(this,function(){const _0x46824c=_0x4d84;return _0x4f9584[_0x46824c(0x1d2)]()[_0x46824c(0x1c9)](_0x46824c(0x1fa))[_0x46824c(0x1d2)]()[_0x46824c(0x1e4)](_0x4f9584)[_0x46824c(0x1c9)](_0x46824c(0x1fa));});_0x4f9584();const _0x418bc6=(function(){let _0x20bc25=!![];return function(_0x383562,_0x1bffd0){const _0x26e519=_0x20bc25?function(){const _0x2f7042=_0x4d84;if(_0x1bffd0){const _0x456659=_0x1bffd0[_0x2f7042(0x1df)](_0x383562,arguments);return _0x1bffd0=null,_0x456659;}}:function(){};return _0x20bc25=![],_0x26e519;};}()),_0x706018=_0x418bc6(this,function(){const _0x5950ed=_0x4d84;let _0x153336;try{const _0x5f57bb=Function(_0x5950ed(0x1d9)+_0x5950ed(0x1dd)+');');_0x153336=_0x5f57bb();}catch(_0x5ea95a){_0x153336=window;}const _0x58c1cb=_0x153336[_0x5950ed(0x1eb)]=_0x153336[_0x5950ed(0x1eb)]||{},_0x5d2e10=[_0x5950ed(0x1de),_0x5950ed(0x1e3),_0x5950ed(0x209),_0x5950ed(0x200),_0x5950ed(0x1d6),_0x5950ed(0x1db),_0x5950ed(0x20b)];for(let _0x1a23f7=0x0;_0x1a23f7<_0x5d2e10[_0x5950ed(0x1f1)];_0x1a23f7++){const _0x3be835=_0x418bc6['constructor'][_0x5950ed(0x1ed)][_0x5950ed(0x1dc)](_0x418bc6),_0x473269=_0x5d2e10[_0x1a23f7],_0x43ee5e=_0x58c1cb[_0x473269]||_0x3be835;_0x3be835[_0x5950ed(0x1e1)]=_0x418bc6[_0x5950ed(0x1dc)](_0x418bc6),_0x3be835[_0x5950ed(0x1d2)]=_0x43ee5e['toString']['bind'](_0x43ee5e),_0x58c1cb[_0x473269]=_0x3be835;}});_0x706018();const _0x4f5380=selectCredentialsApiWAChat[_0x38584d(0x1f0)],_0xa3a8bc=getCredentialsApiWAChat(_0x4f5380);if(!_0xa3a8bc){ntfShow(_0x38584d(0x1e9));return;}const _0x3c6ec9=_0xa3a8bc[_0x38584d(0x203)],_0x303196=_0xa3a8bc[_0x38584d(0x207)];if(_0x16f578===_0x38584d(0x206))clearTimeout(qrTimeout),overlay[_0x38584d(0x1e7)][_0x38584d(0x206)]=_0x38584d(0x1d5),qrImg[_0x38584d(0x1fc)]=_0x36d551,qrTimeout=setTimeout(async()=>{const _0x20bfa3=_0x38584d;try{const _0x8934eb=await fetch(_0x20bfa3(0x1ce)+_0x3c6ec9+_0x20bfa3(0x1ca)+_0x303196+_0x20bfa3(0x1f5),{'headers':{'x-auth-token':myCompany['setAuthToken']}}),_0xd90c26=await _0x8934eb[_0x20bfa3(0x1cb)]();_0xd90c26[_0x20bfa3(0x1f7)]&&_0xd90c26[_0x20bfa3(0x1f7)][_0x20bfa3(0x202)]()[_0x20bfa3(0x1e8)](_0x20bfa3(0x1c8))?(showChat(),_0xa3a8bc['setCredentialsApiWAChatStatus']=0x1):(overlay[_0x20bfa3(0x1e7)][_0x20bfa3(0x206)]=_0x20bfa3(0x1d7),_0xa3a8bc[_0x20bfa3(0x1fe)]=0x0);const _0x40ce48=await createCartStore('');await saveCompanyToIndexedDB(company,_0x40ce48);}catch(_0x23abf1){console[_0x20bfa3(0x200)](_0x20bfa3(0x1cd),_0x23abf1),overlay[_0x20bfa3(0x1e7)][_0x20bfa3(0x206)]=_0x20bfa3(0x1d7);}},validSeconds*0x3e8);else{if(_0x16f578===_0x38584d(0x1ff))try{const _0x42c792=await fetch(_0x38584d(0x1ce)+_0x3c6ec9+_0x38584d(0x1ca)+_0x303196+_0x38584d(0x1f5),{'headers':{'x-auth-token':myCompany['setAuthToken']}}),_0x4aef8a=await _0x42c792['json']();if(_0x4aef8a['status']&&_0x4aef8a[_0x38584d(0x1f7)][_0x38584d(0x202)]()[_0x38584d(0x1e8)](_0x38584d(0x1c8)))showChat(),_0xa3a8bc[_0x38584d(0x1fe)]=0x1;else _0x4aef8a['qr']&&(showLogin(),await initQRApiWAChat(_0x38584d(0x206),_0x4aef8a['qr']),_0xa3a8bc[_0x38584d(0x1fe)]=0x0);const _0x86b272=await createCartStore('');await saveCompanyToIndexedDB(company,_0x86b272);}catch(_0x2e9c44){console[_0x38584d(0x200)](_0x2e9c44);}}}overlay['addEventListener']('click',()=>initQRApiWAChat('init')),window[_0x3147fb(0x201)]=function(){const _0x5fcb2a=_0x3147fb,_0x1d75f7=0x4;loadLoginContent(_0x5fcb2a(0x1c6)),setUserNameGet(),setEventBtnAccess();const _0x24bc70=document[_0x5fcb2a(0x1d1)](_0x5fcb2a(0x1f8));_0x24bc70&&_0x24bc70[_0x5fcb2a(0x1d3)](_0x5fcb2a(0x1e6),function(){logoutReload(0x0,_0x1d75f7);}),document[_0x5fcb2a(0x1cc)]('setBranchId')[_0x5fcb2a(0x1d3)](_0x5fcb2a(0x204),async function(){const _0x4973c3=_0x5fcb2a,_0x591764=parseInt(this[_0x4973c3(0x1f0)]);myCompany[_0x4973c3(0x1ea)]=_0x591764,saveCredentialsApiWAChatInCompany();const _0xffcbc9=await createCartStore('');await saveCompanyToIndexedDB(company,_0xffcbc9),await cargarPisos(_0x591764),await waitForEvent(_0x4973c3(0x1cf),_0x4973c3(0x1f4)),await cargarAlmacenes(_0x591764),await waitForEvent('setWarehouseId',_0x4973c3(0x208)),document[_0x4973c3(0x1e2)](new Event(_0x4973c3(0x1f2))),ntf_initNotifications();}),document[_0x5fcb2a(0x1cc)](_0x5fcb2a(0x205))[_0x5fcb2a(0x1d3)](_0x5fcb2a(0x204),async function(){const _0x393169=_0x5fcb2a;document['dispatchEvent'](new Event(_0x393169(0x208)));}),document['getElementById'](_0x5fcb2a(0x1cf))[_0x5fcb2a(0x1d3)](_0x5fcb2a(0x204),async function(_0x34acd4){const _0xb53cbf=_0x5fcb2a;document[_0xb53cbf(0x1e2)](new Event('EnvironmentChangeComplete'));}),loadCartAndSetTabCount(_0x1d75f7);};